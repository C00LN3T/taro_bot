# Telegram-бот «Гадалка»

Бот предоставляет быстрые гадательные и самопознательные расклады (таро, нумерология, астрология/космо, руны, метафора дня) в Telegram. Полное техническое задание доступно в [docs/TECH_SPEC.md](docs/TECH_SPEC.md).

## Запуск
1. Скопируйте `.env.example` в `.env` и укажите `BOT_TOKEN`, `ADMIN_IDS`, `DEFAULT_LANGUAGE`, `DATABASE_URL` и дневной лимит `DAILY_FREE_LIMIT`.
2. Установите зависимости: `pip install -r requirements.txt`.
3. Запустите бота: `python -m bot.main`.

При первом старте автоматически создаются таблицы SQLite/PostgreSQL и загружаются справочники (полная колода из 78 карт таро, описания чисел нумерологии, 12 знаков зодиака).

## Возможности
- **Мультиязычность:** RU/EN интерфейс, сохраняемый в профиле пользователя.
- **Профиль:** имя, дата рождения, пол, язык; редактирование и полное удаление данных (GDPR-подход).
- **Расклады и расчёты:**
  - Таро: совет дня, 3 карты (П/Н/Б), ситуация, любовь, карьера/финансы.
  - Нумерология: число судьбы, число имени, краткая карта личности, совместимость дат.
  - Астрология: знак по дате, краткий астропортрет, космограмма-лайт.
  - Дополнительно: руна дня, метафора дня, случайный выбор системы.
- **FSM:** возврат в меню из любого состояния, кнопки «Сделать ещё», «Поделиться», «Вернуться в меню».
- **Лимиты и история:** дневной лимит бесплатных раскладов, журнал `spreads_history` для статистики и админ-отчётов.
- **Администрирование:** `/admin_stats` (пользователи, расклады по типам и за сегодня), `/broadcast <текст>` с проверкой списка админов.
- **Безопасность:** секреты читаются из переменных окружения; минимальный сбор данных; удаление профиля очищает историю раскладов.

## Тестирование
- Юнит-тесты сервисов и справочников: `pytest`.

## Дополнительно
- Чек-лист реализации находится в [docs/CHECKLIST.md](docs/CHECKLIST.md) и отражает соответствие ТЗ.
